(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===e(n)?n:String(n)}var i=n((function e(t,n){var o=this,i=t.placeName,u=t.placeImgSrc,c=t.likes,a=t.config,l=t.ownerId,s=t.myId,f=n.handleCardClick,p=n.confirmDelete,y=n.setLikeOnServer,b=n.deleteLikeFromServer,h=n.handleLikeClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"_getPlaceElement",(function(){return document.querySelector(o._templateSelector).content.querySelector(o._placesItemSelector).cloneNode(!0)})),r(this,"_toggleLikeConditionOnserver",(function(){return o._imgLike.classList.contains(o._classLikeActive)?o._deleteLikeFromServer():o._setLikeOnServer()})),r(this,"_toggleLikeCondition",(function(){!1===o._isLikeInProcess&&(o._isLikeInProcess=!0,o._handleLikeClick())})),r(this,"_setEventListeners",(function(){o._img.addEventListener("click",(function(){o._handeCardClick(o._placeImgSrc,o._placeName)})),o._imgLike.addEventListener("mousedown",o._toggleLikeCondition),o._btnPlaceDel.addEventListener("click",o._confirmDelete)})),r(this,"deleteCard",(function(){o._placeElement.remove(),o._placeElement=null})),r(this,"_fillCard",(function(){o._img.src=o._placeImgSrc,o._img.alt+=" ".concat(o._placeName),o._imgTitle.textContent=o._placeName,o._countLikeContainer.textContent=o._countLike,o._checkOwner(),o._checkMyLike()})),r(this,"_checkOwner",(function(){o._ownerCardId===o._myId&&o._btnPlaceDel.classList.add(o._btnDellHiddenClass)})),r(this,"_doLikeActive",(function(){o._imgLike.classList.toggle(o._classLikeActive)})),r(this,"_checkMyLike",(function(){o._likes.forEach((function(e){e._id===o._myId&&o._doLikeActive()}))})),r(this,"getPlaceCard",(function(){return o._fillCard(),o._setEventListeners(),o._placeElement})),this._placeName=i,this._placeImgSrc=u,this._likes=c,this._countLike=c.length,this._ownerCardId=l,this._myId=s,this._handeCardClick=f,this._confirmDelete=p,this._setLikeOnServer=y,this._deleteLikeFromServer=b,this._handleLikeClick=h,this._templateSelector=a.templateSelector,this._placesItemSelector=a.cardSelector,this._classLikeActive=a.classLikeActive,this._btnDellHiddenClass=a.btnDellHiddenClass,this._placeElement=this._getPlaceElement(),this._img=this._placeElement.querySelector(a.imgSelector),this._imgTitle=this._placeElement.querySelector(a.titleSelector),this._imgLike=this._placeElement.querySelector(a.likeSelector),this._btnPlaceDel=this._placeElement.querySelector(a.btnDelSelector),this._countLikeContainer=this._placeElement.querySelector(a.countLikeSelector),this._isLikeInProcess=!1}));function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function a(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===u(t)?t:String(t)}var s=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"_getFormElements",(function(e,t){return Array.from(e.querySelectorAll(t))})),a(this,"_hasInvalidInput",(function(){return r._inputList.some((function(e){return!r._checkValidity(e)}))})),a(this,"_showInputError",(function(e,t,n){n.classList.add(r._inputUnvalidateClass),t.textContent=e})),a(this,"_hideInputError",(function(e,t){t.classList.remove(r._inputUnvalidateClass),e.textContent=""})),a(this,"_checkInputValidity",(function(e,t){r._checkValidity(e)?r._hideInputError(t,e):r._showInputError(e.validationMessage,t,e)})),a(this,"_toggleButtonState",(function(){r._hasInvalidInput()?r._btnSubmit.setAttribute("disabled",!0):r._btnSubmit.removeAttribute("disabled")})),a(this,"_setEventListeners",(function(){r._form.addEventListener("reset",(function(e){e.preventDefault(),r._inputList.forEach((function(e,t){e.value="",r._hideInputError(r._errorList[t],e)})),r._toggleButtonState()})),r._inputList.forEach((function(e,t){e.addEventListener("input",(function(){r._checkInputValidity(e,r._errorList[t]),r._toggleButtonState()}))}))})),a(this,"enableValidation",(function(){r._setEventListeners()})),this._inputUnvalidateClass=t.inputUnvalidateClass,this._form=n,this._inputList=this._getFormElements(n,t.inputSelector),this._errorList=this._getFormElements(n,t.errorSelector),this._btnSubmit=n.querySelector(t.submitBtnSelector)}var t,n;return t=e,(n=[{key:"_checkValidity",value:function(e){return e.validity.valid}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===f(o)?o:String(o)),r)}var o}var y=function(){function e(t,n){var r=t.classBtnClose,o=t.classPopupOpened;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._classPopupOpened=o,this._classBtnClose=r,this._popup=document.querySelector(n),this._handleEscClose=this._handleEscClose.bind(this),this.open=this.open.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add(this._classPopupOpened),document.addEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"close",value:function(){this._popup.classList.remove(this._classPopupOpened),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){(t.target.classList.contains(e._classPopupOpened)||t.target.classList.contains(e._classBtnClose))&&e.close()}))}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},m.apply(this,arguments)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function S(e){var t=function(e,t){if("object"!==b(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===b(t)?t:String(t)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(r);if(o){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}(this,e)});function u(e,t){var n,r,o,c,a=e.popupConfig,l=e.inputSelector,s=e.popupSelector,f=e.nameForm,p=e.btnSubmitSelector,y=e.btnSubmitFetchCondition;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),r=_(n=i.call(this,a,s)),c=function(e){n._inputs.forEach((function(t,n){return t.value=e[t.getAttribute("name")]}))},(o=S(o="setInputValues"))in r?Object.defineProperty(r,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):r[o]=c,n._callbackSubmit=t,n._classInput=l,n._btnSubmitFetchCondition=y,n._form=document.forms[f],n._inputs=Array.from(n._form.querySelectorAll(n._classInput)),n._btnSubmit=n._form.querySelector(p),n._btnSubmitOriginalText=n._btnSubmit.textContent,n}return t=u,(n=[{key:"_getInputValues",value:function(){return this._inputs.reduce((function(e,t){return e[t.getAttribute("name")]=t.value,e}),{})}},{key:"setEventListeners",value:function(){var e=this;m(v(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._fetchCondition()}))}},{key:"_fetchCondition",value:function(){this._btnSubmit.textContent=this._btnSubmitFetchCondition,this._callbackSubmit(this._getInputValues())}},{key:"close",value:function(){this._form.reset(),m(v(u.prototype),"close",this).call(this)}},{key:"open",value:function(){m(v(u.prototype),"open",this).call(this)}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(y);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==k(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===k(o)?o:String(o)),r)}var o}function w(){return w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},w.apply(this,arguments)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=L(r);if(o){var n=L(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t,n=e.popupConfig,r=e.popupSelector,o=e.figureSelector,c=e.imgSelector,a=e.figcaptionSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,n,r))._figure=document.querySelector(o),t._figureImg=t._figure.querySelector(c),t._figcaption=t._figure.querySelector(a),t}return t=u,(n=[{key:"open",value:function(e,t){this._figureImg.src=e,this._figureImg.alt=t,this._figcaption.textContent=t,w(L(u.prototype),"open",this).call(this)}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(y);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I(r.key),r)}}function I(e){var t=function(e,t){if("object"!==E(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===E(t)?t:String(t)}var q=function(){function e(t,n){var r,o,i,u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,i=function(e){u._cards.prepend(e)},(o=I(o="addItem"))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,this._cards=document.querySelector(n),this._renderer=t}var t,n;return t=e,(n=[{key:"renderCards",value:function(e){for(var t=e.length-1;t>-1;t--)this._renderer(e[t])}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R(r.key),r)}}function R(e){var t=function(e,t){if("object"!==T(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===T(t)?t:String(t)}var U=function(){function e(t){var n,r,o,i=this,u=t.selectorNameUserContainer,c=t.selectorUserAboutContainer,a=t.selectorUserAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,o=function(){return{nameUser:i._nameContainer.textContent,aboutUser:i._aboutContainer.textContent}},(r=R(r="getUserInfo"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this._nameContainer=document.querySelector(u),this._aboutContainer=document.querySelector(c),this._userAvatar=document.querySelector(a)}var t,n;return t=e,(n=[{key:"setUserInfo",value:function(e,t){this._nameContainer.textContent=e,this._aboutContainer.textContent=t}},{key:"setAvatar",value:function(e){this._userAvatar.src=e}},{key:"setInitialUserInfo",value:function(e){this.setUserInfo(e.name,e.about),this.setAvatar(e.avatar)}}])&&A(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==x(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===x(o)?o:String(o)),r)}var o}var F=function(){function e(t){var n=t.token,r=t.myId,o=t.urlServer,i=t.qUsersMe,u=t.qCards,c=t.qLikes,a=t.qAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._token=n,this._urlServer=o,this._myId=r,this._qUsersMe=i,this._qCards=u,this._qLikes=c,this._qAvatar=a}var t,n;return t=e,(n=[{key:"getUserDataFromServer",value:function(){var e=this;return fetch(this._urlServer+this._qUsersMe,{headers:{authorization:this._token}}).then((function(t){return e._handleResponse(t)}))}},{key:"getInitialCards",value:function(){var e=this;return fetch(this._urlServer+this._qCards,{headers:{authorization:this._token}}).then((function(t){return e._handleResponse(t)}))}},{key:"updateUserData",value:function(e,t){var n=this;return fetch(this._urlServer+this._qUsersMe,{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})}).then((function(e){return n._handleResponse(e)}))}},{key:"addNewCard",value:function(e,t){var n=this;return fetch(this._urlServer+this._qCards,{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})}).then((function(e){return n._handleResponse(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch(this._urlServer+this._qCards+e,{method:"DELETE",headers:{authorization:this._token}}).then((function(e){return t._handleResponse(e)}))}},{key:"setLike",value:function(e){var t=this;return fetch(this._urlServer+this._qCards+e+this._qLikes,{method:"PUT",headers:{authorization:this._token}}).then((function(e){return t._handleResponse(e)}))}},{key:"deleteLike",value:function(e){var t=this;return fetch(this._urlServer+this._qCards+e+this._qLikes,{method:"DELETE",headers:{authorization:this._token}}).then((function(e){return t._handleResponse(e)}))}},{key:"updateAvatar",value:function(e){var t=this;return fetch(this._urlServer+this._qUsersMe+this._qAvatar,{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((function(e){return t._handleResponse(e)}))}},{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject(e.status)}}])&&D(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==B(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===B(o)?o:String(o)),r)}var o}function V(){return V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=z(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},V.apply(this,arguments)}function M(e,t){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},M(e,t)}function z(e){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},z(e)}var H,J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=z(r);if(o){var n=z(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t,n=e.popupConfig,r=e.popupSelector,o=e.nameForm,c=e.btnSubmitSelector,a=e.btnSubmitFetchCondition;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,n,r))._delCard,t._form=document.forms[o],t._btnSubmitFetchCondition=a,t._btnSubmit=t._form.querySelector(c),t._btnSubmitOriginalText=t._btnSubmit.textContent,t}return t=u,(n=[{key:"setEventListeners",value:function(){var e=this;V(z(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){e._btnSubmit.textContent=e._btnSubmitFetchCondition,t.preventDefault(),e._delCard()}))}},{key:"open",value:function(e){this._delCard=e,V(z(u.prototype),"open",this).call(this)}}])&&N(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(y),$=document.querySelector(".profile__btn-edit"),G=document.querySelector(".profile__btn-add"),K=document.querySelector(".profile__avatar-edit"),Q="Произошла какая-то ошибка...\n",W=".popup__input",X=".popup__btn-submit",Y="Сохранение...",Z={classBtnClose:"popup__btn-close",classPopupOpened:"to-visible"},ee={popupConfig:Z,popupSelector:".popup_type_full-img-place",figureSelector:".popup__figure",imgSelector:".popup__img",figcaptionSelector:".popup__figcaption"},te={popupConfig:Z,inputSelector:W,popupSelector:".popup_type_add-place",nameForm:"addNewPlace",btnSubmitSelector:X,btnSubmitFetchCondition:Y},ne={popupConfig:Z,inputSelector:W,popupSelector:".popup_type_edit-profile",nameForm:"editProfileText",btnSubmitSelector:X,btnSubmitFetchCondition:Y},re={inputSelector:W,submitBtnSelector:".popup__btn-submit",inputUnvalidateClass:"popup__input_type_error",errorSelector:".popup__error"},oe={cardSelector:".cards__grid-item",imgSelector:".card__photo",titleSelector:".card__title",likeSelector:".card__like",btnDelSelector:".card__del-card-btn",classLikeActive:"card__like_active",templateSelector:".template",countLikeSelector:".card__like-count",btnDellHiddenClass:"to-visible"},ie={popupConfig:Z,inputSelector:W,popupSelector:".popup_type_editAvatar",nameForm:"avatarUpdate",btnSubmitSelector:X,btnSubmitFetchCondition:Y};function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,u,c=[],a=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{if(!a&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ae(e){var t=new i(function(e){return{config:oe,placeName:e.name,placeImgSrc:e.link,likes:e.likes,ownerId:e.owner._id,myId:H}}(e),{handleCardClick:function(){return se.open(e.link,e.name)},setLikeOnServer:function(){return pe.setLike(e._id)},deleteLikeFromServer:function(){return pe.deleteLike(e._id)},handleLikeClick:function(){t._toggleLikeConditionOnserver().then((function(e){t._countLikeContainer.textContent=e.likes.length,t._doLikeActive()})).catch((function(e){return alert(Q+e)})).finally((function(){return t._isLikeInProcess=!1}))},confirmDelete:function(){return le.open((function(){return pe.deleteCard(e._id).then((function(){t.deleteCard(),le.close()})).catch((function(e){return alert(Q+e)}))}))}}),n=t.getPlaceCard();ye.addItem(n)}var le=new J({popupConfig:Z,popupSelector:".popup_type_confirmDelete",nameForm:"confirmCardDelete",btnSubmitSelector:X,btnSubmitFetchCondition:"Удаление..."}),se=new P(ee),fe=new U({selectorNameUserContainer:".profile__title-name",selectorUserAboutContainer:".profile__subtitle",selectorUserAvatar:".profile__avatar"}),pe=new F({token:"e07a98d9-da5b-4bb3-83f5-8be59ad95ea9",myId:"7fe16738c600cfe949208d93",urlServer:"https://mesto.nomoreparties.co/v1/cohort-65/",qUsersMe:"users/me",qCards:"cards/",qLikes:"/likes/",qAvatar:"/avatar"}),ye=new q(ae,".cards__grid"),be=new g(ne,(function(e){var t=e.nameUser,n=e.aboutUser;pe.updateUserData(t,n).then((function(){fe.setUserInfo(t,n),be.close()})).catch((function(e){return alert(Q+e)})).finally((function(){return be._btnSubmit.textContent=be._btnSubmitOriginalText}))})),he=new g(te,(function(e){var t=e.namePlace,n=e.urlImage;pe.addNewCard(t,n).then((function(e){ae(e),he.close()})).catch((function(e){return alert("Произошла какая-то ошибка...\n"+e)})).finally((function(){return he._btnSubmit.textContent=he._btnSubmitOriginalText}))})),me=new g(ie,(function(e){var t=e.urlImage;pe.updateAvatar(t).then((function(e){fe.setAvatar(e.avatar),me.close()})).catch((function(e){return alert("Произошла какая-то ошибка...\n"+e)})).finally((function(){return me._btnSubmit.textContent=me._btnSubmitOriginalText}))}));Promise.all([pe.getUserDataFromServer(),pe.getInitialCards()]).then((function(e){var t=ue(e,2),n=t[0],r=t[1];fe.setInitialUserInfo(n),H=n._id,ye.renderCards(r)})).catch((function(e){var t=ue(e,2),n=t[0],r=t[1];return alert(n,r)})),se.setEventListeners(),he.setEventListeners(),be.setEventListeners(),le.setEventListeners(),me.setEventListeners(),Array.from(document.forms).forEach((function(e){new s(re,e).enableValidation()})),K.addEventListener("click",me.open),G.addEventListener("click",he.open),$.addEventListener("click",(function(){be.setInputValues(fe.getUserInfo()),be.open()})),setTimeout((function(){return document.querySelector(".preload").classList.remove("preload")}),500)})();
//# sourceMappingURL=main.js.map