(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function r(t,e,n){return(e=o(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(e){var n=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===t(n)?n:String(n)}var i=n((function t(e,n){var o=this,i=e.placeName,u=e.placeImgSrc,c=e.likes,a=e.config,l=e.ownerId,s=e.myId,f=n.handleCardClick,p=n.confirmDelete,y=n.setLikeOnServer,b=n.deleteLikeFromServer,m=n.handleLikeClick;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,"_getPlaceElement",(function(){return document.querySelector(o._templateSelector).content.querySelector(o._placesItemSelector).cloneNode(!0)})),r(this,"_toggleLikeConditionOnserver",(function(){return o._imgLike.classList.contains(o._classLikeActive)?o._deleteLikeFromServer():o._setLikeOnServer()})),r(this,"_toggleLikeCondition",(function(){!1===o._isLikeInProcess&&(o._isLikeInProcess=!0,o._handleLikeClick())})),r(this,"_setEventListeners",(function(){o._img.addEventListener("click",(function(){o._handeCardClick(o._placeImgSrc,o._placeName)})),o._imgLike.addEventListener("mousedown",o._toggleLikeCondition),o._btnPlaceDel.addEventListener("click",o._confirmDelete)})),r(this,"deleteCard",(function(){o._placeElement.remove(),o._placeElement=null})),r(this,"_fillCard",(function(){o._img.src=o._placeImgSrc,o._img.alt+=" ".concat(o._placeName),o._imgTitle.textContent=o._placeName,o._countLikeContainer.textContent=o._countLike,o._checkOwner(),o._checkMyLike()})),r(this,"_checkOwner",(function(){o._ownerCardId===o._myId&&o._btnPlaceDel.classList.add(o._btnDellHiddenClass)})),r(this,"_doLikeActive",(function(){o._imgLike.classList.toggle(o._classLikeActive)})),r(this,"_checkMyLike",(function(){o._likes.forEach((function(t){t._id===o._myId&&o._doLikeActive()}))})),r(this,"getPlaceCard",(function(){return o._fillCard(),o._setEventListeners(),o._placeElement})),this._placeName=i,this._placeImgSrc=u,this._likes=c,this._countLike=c.length,this._ownerCardId=l,this._myId=s,this._handeCardClick=f,this._confirmDelete=p,this._setLikeOnServer=y,this._deleteLikeFromServer=b,this._handleLikeClick=m,this._templateSelector=a.templateSelector,this._placesItemSelector=a.cardSelector,this._classLikeActive=a.classLikeActive,this._btnDellHiddenClass=a.btnDellHiddenClass,this._placeElement=this._getPlaceElement(),this._img=this._placeElement.querySelector(a.imgSelector),this._imgTitle=this._placeElement.querySelector(a.titleSelector),this._imgLike=this._placeElement.querySelector(a.likeSelector),this._btnPlaceDel=this._placeElement.querySelector(a.btnDelSelector),this._countLikeContainer=this._placeElement.querySelector(a.countLikeSelector),this._isLikeInProcess=!1}));function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function a(t,e,n){return(e=l(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===u(e)?e:String(e)}var s=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"_getFormElements",(function(t,e){return Array.from(t.querySelectorAll(e))})),a(this,"_hasInvalidInput",(function(){return r._inputList.some((function(t){return!r._checkValidity(t)}))})),a(this,"_showInputError",(function(t,e,n){n.classList.add(r._inputUnvalidateClass),e.textContent=t})),a(this,"_hideInputError",(function(t,e){e.classList.remove(r._inputUnvalidateClass),t.textContent=""})),a(this,"_checkInputValidity",(function(t,e){r._checkValidity(t)?r._hideInputError(e,t):r._showInputError(t.validationMessage,e,t)})),a(this,"_toggleButtonState",(function(){r._hasInvalidInput()?r._btnSubmit.setAttribute("disabled",!0):r._btnSubmit.removeAttribute("disabled")})),a(this,"_setEventListeners",(function(){r._form.addEventListener("reset",(function(t){t.preventDefault(),r._inputList.forEach((function(t,e){t.value="",r._hideInputError(r._errorList[e],t)})),r._toggleButtonState()})),r._inputList.forEach((function(t,e){t.addEventListener("input",(function(){r._checkInputValidity(t,r._errorList[e]),r._toggleButtonState()}))}))})),a(this,"enableValidation",(function(){r._setEventListeners()})),this._inputUnvalidateClass=e.inputUnvalidateClass,this._form=n,this._inputList=this._getFormElements(n,e.inputSelector),this._errorList=this._getFormElements(n,e.errorSelector),this._btnSubmit=n.querySelector(e.submitBtnSelector)}var e,n;return e=t,(n=[{key:"_checkValidity",value:function(t){return t.validity.valid}}])&&c(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===f(o)?o:String(o)),r)}var o}var y=function(){function t(e,n){var r=e.classBtnClose,o=e.classPopupOpened;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._classPopupOpened=o,this._classBtnClose=r,this._popup=document.querySelector(n),this._handleEscClose=this._handleEscClose.bind(this),this.open=this.open.bind(this)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add(this._classPopupOpened),document.addEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"close",value:function(){this._popup.classList.remove(this._classPopupOpened),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){(e.target.classList.contains(t._classPopupOpened)||e.target.classList.contains(t._classBtnClose))&&t.close()}))}}])&&p(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,S(r.key),r)}}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},d.apply(this,arguments)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}function S(t){var e=function(t,e){if("object"!==b(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===b(e)?e:String(e)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=v(r);if(o){var n=v(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===b(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _(t)}(this,t)});function u(t,e){var n,r,o,c,a=t.popupConfig,l=t.inputSelector,s=t.popupSelector,f=t.nameForm,p=t.btnSubmitSelector,y=t.btnSubmitFetchCondition;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),r=_(n=i.call(this,a,s)),c=function(t){n._inputs.forEach((function(e,n){return e.value=t[e.getAttribute("name")]}))},(o=S(o="setInputValues"))in r?Object.defineProperty(r,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):r[o]=c,n._callbackSubmit=e,n._classInput=l,n._btnSubmitFetchCondition=y,n._form=document.forms[f],n._inputs=Array.from(n._form.querySelectorAll(n._classInput)),n._btnSubmit=n._form.querySelector(p),n._btnSubmitOriginalText=n._btnSubmit.textContent,n}return e=u,(n=[{key:"_getInputValues",value:function(){return this._inputs.reduce((function(t,e){return t[e.getAttribute("name")]=e.value,t}),{})}},{key:"setEventListeners",value:function(){var t=this;d(v(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._fetchCondition()}))}},{key:"_fetchCondition",value:function(){this._btnSubmit.textContent=this._btnSubmitFetchCondition,this._callbackSubmit(this._getInputValues())}},{key:"close",value:function(){this._form.reset(),d(v(u.prototype),"close",this).call(this)}},{key:"open",value:function(){d(v(u.prototype),"open",this).call(this)}}])&&m(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(y);function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==k(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===k(o)?o:String(o)),r)}var o}function w(){return w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=L(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},w.apply(this,arguments)}function O(t,e){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},O(t,e)}function L(t){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},L(t)}var P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=L(r);if(o){var n=L(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===k(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e,n=t.popupConfig,r=t.popupSelector,o=t.figureSelector,c=t.imgSelector,a=t.figcaptionSelector;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,n,r))._figure=document.querySelector(o),e._figureImg=e._figure.querySelector(c),e._figcaption=e._figure.querySelector(a),e}return e=u,(n=[{key:"open",value:function(t,e){this._figureImg.src=t,this._figureImg.alt=e,this._figcaption.textContent=e,w(L(u.prototype),"open",this).call(this)}}])&&C(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(y);function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I(r.key),r)}}function I(t){var e=function(t,e){if("object"!==E(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===E(e)?e:String(e)}var q=function(){function t(e,n){var r,o,i,u=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,i=function(t){u._cards.prepend(t)},(o=I(o="addItem"))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,this._cards=document.querySelector(n),this._renderer=e}var e,n;return e=t,(n=[{key:"renderCards",value:function(t){for(var e=t.length-1;e>-1;e--)this._renderer(t[e])}}])&&j(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,U(r.key),r)}}function U(t){var e=function(t,e){if("object"!==T(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===T(e)?e:String(e)}var x=function(){function t(e){var n,r,o,i=this,u=e.selectorNameUserContainer,c=e.selectorUserAboutContainer,a=e.selectorUserAvatar;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=function(){return{nameUser:i._nameContainer.textContent,aboutUser:i._aboutContainer.textContent}},(r=U(r="getUserInfo"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this._nameContainer=document.querySelector(u),this._aboutContainer=document.querySelector(c),this._userAvatar=document.querySelector(a)}var e,n;return e=t,(n=[{key:"setUserInfo",value:function(t,e){this._nameContainer.textContent=t,this._aboutContainer.textContent=e}},{key:"setAvatar",value:function(t){this._userAvatar.src=t}},{key:"setInitialUserInfo",value:function(t){this.setUserInfo(t.name,t.about),this.setAvatar(t.avatar)}}])&&A(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==D(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===D(o)?o:String(o)),r)}var o}var F=function(){function t(e){var n=e.token,r=e.myId,o=e.urlServer,i=e.qUsersMe,u=e.qCards,c=e.qLikes,a=e.qAvatar;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._token=n,this._urlServer=o,this._myId=r,this._qUsersMe=i,this._qCards=u,this._qLikes=c,this._qAvatar=a}var e,n;return e=t,(n=[{key:"getUserDataFromServer",value:function(){return fetch(this._urlServer+this._qUsersMe,{headers:{authorization:this._token}})}},{key:"getInitialCards",value:function(){return fetch(this._urlServer+this._qCards,{headers:{authorization:this._token}})}},{key:"updateUserData",value:function(t,e){return fetch(this._urlServer+this._qUsersMe,{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t,about:e})})}},{key:"addNewCard",value:function(t,e){return fetch(this._urlServer+this._qCards,{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t,link:e})})}},{key:"deleteCard",value:function(t){return fetch(this._urlServer+this._qCards+t,{method:"DELETE",headers:{authorization:this._token}})}},{key:"setLike",value:function(t){return fetch(this._urlServer+this._qCards+t+this._qLikes,{method:"PUT",headers:{authorization:this._token}})}},{key:"deleteLike",value:function(t){return fetch(this._urlServer+this._qCards+t+this._qLikes,{method:"DELETE",headers:{authorization:this._token}})}},{key:"updateAvatar",value:function(t){return fetch(this._urlServer+this._qUsersMe+this._qAvatar,{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:t})})}}])&&R(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==B(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===B(o)?o:String(o)),r)}var o}function V(){return V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=z(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},V.apply(this,arguments)}function M(t,e){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},M(t,e)}function z(t){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},z(t)}var H,J=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=z(r);if(o){var n=z(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e,n=t.popupConfig,r=t.popupSelector,o=t.nameForm,c=t.btnSubmitSelector,a=t.btnSubmitFetchCondition;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,n,r))._delCard,e._form=document.forms[o],e._btnSubmitFetchCondition=a,e._btnSubmit=e._form.querySelector(c),e._btnSubmitOriginalText=e._btnSubmit.textContent,e}return e=u,(n=[{key:"setEventListeners",value:function(){var t=this;V(z(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){t._btnSubmit.textContent=t._btnSubmitFetchCondition,e.preventDefault(),t._delCard()}))}},{key:"open",value:function(t){this._delCard=t,V(z(u.prototype),"open",this).call(this)}}])&&N(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(y),$=document.querySelector(".profile__btn-edit"),G=document.querySelector(".profile__btn-add"),K=document.querySelector(".profile__avatar-edit"),Q="Произошла какая-то ошибка...\n",W=".popup__input",X=".popup__btn-submit",Y="Сохранение...",Z={classBtnClose:"popup__btn-close",classPopupOpened:"to-visible"},tt={popupConfig:Z,popupSelector:".popup_type_full-img-place",figureSelector:".popup__figure",imgSelector:".popup__img",figcaptionSelector:".popup__figcaption"},et={popupConfig:Z,inputSelector:W,popupSelector:".popup_type_add-place",nameForm:"addNewPlace",btnSubmitSelector:X,btnSubmitFetchCondition:Y},nt={popupConfig:Z,inputSelector:W,popupSelector:".popup_type_edit-profile",nameForm:"editProfileText",btnSubmitSelector:X,btnSubmitFetchCondition:Y},rt={inputSelector:W,submitBtnSelector:".popup__btn-submit",inputUnvalidateClass:"popup__input_type_error",errorSelector:".popup__error"},ot={cardSelector:".cards__grid-item",imgSelector:".card__photo",titleSelector:".card__title",likeSelector:".card__like",btnDelSelector:".card__del-card-btn",classLikeActive:"card__like_active",templateSelector:".template",countLikeSelector:".card__like-count",btnDellHiddenClass:"to-visible"},it={popupConfig:Z,inputSelector:W,popupSelector:".popup_type_editAvatar",nameForm:"avatarUpdate",btnSubmitSelector:X,btnSubmitFetchCondition:Y};function ut(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,c=[],a=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);a=!0);}catch(t){l=!0,o=t}finally{try{if(!a&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ct(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ct(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function at(t){var e=new i(function(t){return{config:ot,placeName:t.name,placeImgSrc:t.link,likes:t.likes,ownerId:t.owner._id,myId:H}}(t),{handleCardClick:function(){return ft.open(t.link,t.name)},setLikeOnServer:function(){return lt(yt.setLike(t._id))},deleteLikeFromServer:function(){return lt(yt.deleteLike(t._id))},handleLikeClick:function(){e._toggleLikeConditionOnserver().then((function(t){e._countLikeContainer.textContent=t.likes.length,e._doLikeActive()})).catch((function(t){return alert(Q+t)})).finally((function(){return e._isLikeInProcess=!1}))},confirmDelete:function(){return st.open((function(){return lt(yt.deleteCard(t._id)).then((function(){e.deleteCard(),st.close()})).catch((function(t){return alert(Q+t)}))}))}}),n=e.getPlaceCard();bt.addItem(n)}function lt(t){return t.then((function(t){if(!t.ok)throw new Error(t);return t.json()}))}var st=new J({popupConfig:Z,popupSelector:".popup_type_confirmDelete",nameForm:"confirmCardDelete",btnSubmitSelector:X,btnSubmitFetchCondition:"Удаление..."}),ft=new P(tt),pt=new x({selectorNameUserContainer:".profile__title-name",selectorUserAboutContainer:".profile__subtitle",selectorUserAvatar:".profile__avatar"}),yt=new F({token:"e07a98d9-da5b-4bb3-83f5-8be59ad95ea9",myId:"7fe16738c600cfe949208d93",urlServer:"https://mesto.nomoreparties.co/v1/cohort-65/",qUsersMe:"users/me",qCards:"cards/",qLikes:"/likes/",qAvatar:"/avatar"}),bt=new q(at,".cards__grid"),mt=new g(nt,(function(t){var e=t.nameUser,n=t.aboutUser;lt(yt.updateUserData(e,n)).then((function(){pt.setUserInfo(e,n),mt.close()})).catch((function(t){return alert(Q+t)})).finally((function(){return mt._btnSubmit.textContent=mt._btnSubmitOriginalText}))})),dt=new g(et,(function(t){var e=t.namePlace,n=t.urlImage;lt(yt.addNewCard(e,n)).then((function(t){at(t),dt.close()})).catch((function(t){return alert("Произошла какая-то ошибка...\n"+t)})).finally((function(){return dt._btnSubmit.textContent=dt._btnSubmitOriginalText}))})),ht=new g(it,(function(t){var e=t.urlImage;lt(yt.updateAvatar(e)).then((function(t){pt.setAvatar(t.avatar),ht.close()})).catch((function(t){return alert("Произошла какая-то ошибка...\n"+t)})).finally((function(){return ht._btnSubmit.textContent=ht._btnSubmitOriginalText}))}));Promise.all([lt(yt.getUserDataFromServer()),lt(yt.getInitialCards())]).then((function(t){var e=ut(t,2),n=e[0],r=e[1];pt.setInitialUserInfo(n),H=n._id,bt.renderCards(r)})).catch((function(t){var e=ut(t,2),n=e[0],r=e[1];return alert(n,r)})),ft.setEventListeners(),dt.setEventListeners(),mt.setEventListeners(),st.setEventListeners(),ht.setEventListeners(),Array.from(document.forms).forEach((function(t){new s(rt,t).enableValidation()})),K.addEventListener("click",ht.open),G.addEventListener("click",dt.open),$.addEventListener("click",(function(){mt.setInputValues(pt.getUserInfo()),mt.open()})),setTimeout((function(){return document.querySelector(".preload").classList.remove("preload")}),500)})();
//# sourceMappingURL=main.js.map