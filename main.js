(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function r(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(t){var r=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===e(r)?r:String(r)}var o=function(){function e(t){var n=this,o=t.placeName,i=t.placeImgSrc,u=t.countLike,c=t.config,l=t.ownerId,a=t.myId,s=t.handleCardClick,f=t.confirmDelete,p=t.setLikeOnServer,y=t.deleteLikeFromServer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"_getPlaceElement",(function(){return document.querySelector(n._templateSelector).content.querySelector(n._placesItemSelector).cloneNode(!0)})),r(this,"_toggleLikeConditionOnserver",(function(){return n._imgLike.classList.contains(n._classLikeActive)?n._deleteLikeFromServer():n._setLikeOnServer()})),r(this,"_toggleLikeCondition",(function(){n._toggleLikeConditionOnserver().then((function(e){n._countLikeConitainer.textContent=e.likes.length,n._imgLike.classList.toggle(n._classLikeActive)})).catch((function(e){return console.log(e)}))})),r(this,"_setEventListeners",(function(){n._img.addEventListener("click",(function(){n._handeCardClick(n._placeImgSrc,n._placeName)})),n._imgLike.addEventListener("mousedown",n._toggleLikeCondition),n._btnPlaceDel.addEventListener("click",n._confirmDelete)})),r(this,"_fillPlaceImg",(function(){n._img.src=n._placeImgSrc,n._img.alt+=" ".concat(n._placeName),n._imgTitle.textContent=n._placeName,n._countLikeConitainer.textContent=n._countLike,n._ownerCardId===n._myId&&n._btnPlaceDel.classList.add(n._btnDellHiddenClass)})),r(this,"getPlaceCard",(function(){return n._fillPlaceImg(),n._setEventListeners(),n._placeElement})),this._placeName=o,this._placeImgSrc=i,this._countLike=u,this._ownerCardId=l,this._myId=a,this._handeCardClick=s,this._confirmDelete=f,this._setLikeOnServer=p,this._deleteLikeFromServer=y,this._templateSelector=c.templateSelector,this._placesItemSelector=c.cardSelector,this._classLikeActive=c.classLikeActive,this._btnDellHiddenClass=c.btnDellHiddenClass,this._placeElement=this._getPlaceElement(),this._img=this._placeElement.querySelector(c.imgSelector),this._imgTitle=this._placeElement.querySelector(c.titleSelector),this._imgLike=this._placeElement.querySelector(c.likeSelector),this._btnPlaceDel=this._placeElement.querySelector(c.btnDelSelector),this._countLikeConitainer=this._placeElement.querySelector(c.countLikeSelector)}var n,o;return n=e,(o=[{key:"deleteOnClick",value:function(){this._placeElement.remove(),this._placeElement=null}}])&&t(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),e}();function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===i(t)?t:String(t)}var s=c((function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"_getFormElements",(function(e,t){return Array.from(e.querySelectorAll(t))})),l(this,"_hasInvalidInput",(function(){return n._inputList.some((function(e){return!e.validity.valid}))})),l(this,"_showInputError",(function(e,t,r){r.classList.add(n._inputUnvalidateClass),t.textContent=e})),l(this,"_hideInputError",(function(e,t){t.classList.remove(n._inputUnvalidateClass),e.textContent=""})),l(this,"_checkInputValidity",(function(e,t){e.validity.valid?n._hideInputError(t,e):n._showInputError(e.validationMessage,t,e)})),l(this,"_toggleButtonState",(function(){n._hasInvalidInput()?n._btnSubmit.setAttribute("disabled",!0):n._btnSubmit.removeAttribute("disabled")})),l(this,"_setEventListeners",(function(){n._form.addEventListener("reset",(function(e){e.preventDefault(),n._inputList.forEach((function(e,t){e.value="",n._hideInputError(n._errorList[t],e)})),n._toggleButtonState()})),n._inputList.forEach((function(e,t){e.addEventListener("input",(function(){n._checkInputValidity(e,n._errorList[t]),n._toggleButtonState()}))}))})),l(this,"enableValidation",(function(){n._setEventListeners()})),this._inputUnvalidateClass=t.inputUnvalidateSelector,this._form=r,this._inputList=this._getFormElements(r,t.inputSelector),this._errorList=this._getFormElements(r,t.errorSelector),this._btnSubmit=r.querySelector(t.submitBtnSelector)}));function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===f(o)?o:String(o)),n)}var o}var y=function(){function e(t,r){var n=t.classBtnClose,o=t.classPopupOpened;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._classPopupOpened=o,this._classBtnClose=n,this._popup=document.querySelector(r),this._handleEscClose=this._handleEscClose.bind(this),this.open=this.open.bind(this)}var t,r;return t=e,(r=[{key:"open",value:function(){this._popup.classList.add(this._classPopupOpened),document.addEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"close",value:function(){this._popup.classList.remove(this._classPopupOpened),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){(t.target.classList.contains(e._classPopupOpened)||t.target.classList.contains(e._classBtnClose))&&e.close()}))}}])&&p(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},d.apply(this,arguments)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function S(e){var t=function(e,t){if("object"!==b(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===b(t)?t:String(t)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(n);if(o){var r=_(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}(this,e)});function u(e,t){var r,n,o,c,l=e.popupConfig,a=e.inputSelector,s=e.popupSelector,f=e.nameForm;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),n=v(r=i.call(this,l,s)),c=function(e){r._inputs.forEach((function(t,r){return t.value=e[t.getAttribute("name")]}))},(o=S(o="setInputValues"))in n?Object.defineProperty(n,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):n[o]=c,r._callbackSubmit=t,r._classInput=a,r._form=document.forms[f],r._inputs=Array.from(r._form.querySelectorAll(r._classInput)),r}return t=u,(r=[{key:"_getInputValues",value:function(){var e={};return this._inputs.forEach((function(t){e[t.getAttribute("name")]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;d(_(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._callbackSubmit(e._getInputValues()),e.close()}))}},{key:"close",value:function(){this._form.reset(),d(_(u.prototype),"close",this).call(this)}},{key:"open",value:function(){d(_(u.prototype),"open",this).call(this)}}])&&m(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(y);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==w(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===w(o)?o:String(o)),n)}var o}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},O.apply(this,arguments)}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(n);if(o){var r=P(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t,r=e.popupConfig,n=e.popupSelector,o=e.figureSelector,c=e.imgSelector,l=e.figcaptionSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,r,n))._figure=document.querySelector(o),t._figureImg=t._figure.querySelector(c),t._figcaption=t._figure.querySelector(l),t}return t=u,(r=[{key:"open",value:function(e,t){this._figureImg.src=e,this._figureImg.alt=t,this._figcaption.textContent=t,O(P(u.prototype),"open",this).call(this)}}])&&k(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(y);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,I(n.key),n)}}function I(e){var t=function(e,t){if("object"!==j(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===j(t)?t:String(t)}var q=function(){function e(t,r){var n,o,i,u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,i=function(e){u._cards.prepend(e)},(o=I(o="addItem"))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,this._cards=document.querySelector(r),this._renderer=t}var t,r;return t=e,(r=[{key:"renderCards",value:function(e){for(var t=e.length-1;t>-1;t--)this._renderer(e[t])}}])&&L(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,U(n.key),n)}}function U(e){var t=function(e,t){if("object"!==T(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===T(t)?t:String(t)}var D=function(){function e(t){var r,n,o,i=this,u=t.selectorNameUserContainer,c=t.selectorUserAboutContainer,l=t.selectorUserAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=function(){return{nameUser:i._nameContainer.textContent,aboutUser:i._aboutContainer.textContent}},(n=U(n="getUserInfo"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._nameContainer=document.querySelector(u),this._aboutContainer=document.querySelector(c),this._userAvatar=document.querySelector(l)}var t,r;return t=e,(r=[{key:"setUserInfo",value:function(e,t){this._nameContainer.textContent=e,this._aboutContainer.textContent=t}},{key:"setAvatar",value:function(e){this._userAvatar.src=e}},{key:"setInitialUserInfo",value:function(e){this.setUserInfo(e.name,e.about),this.setAvatar(e.avatar)}}])&&R(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==A(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===A(o)?o:String(o)),n)}var o}var B=function(){function e(t){var r=t.token,n=t.myId,o=t.urlServer,i=t.qUsersMe,u=t.qCards,c=t.qLikes;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._token=r,this._urlServer=o,this._myId=n,this._qUsersMe=i,this._qCards=u,this._qLikes=c}var t,r;return t=e,(r=[{key:"getUserDataFromServer",value:function(){return fetch(this._urlServer+this._qUsersMe,{headers:{authorization:this._token}})}},{key:"getInitialCards",value:function(){return fetch(this._urlServer+this._qCards,{headers:{authorization:this._token}})}},{key:"updateUserData",value:function(e,t){return fetch(this._urlServer+this._qUsersMe,{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})})}},{key:"addNewCard",value:function(e,t){return fetch(this._urlServer+this._qCards,{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})})}},{key:"deleteCard",value:function(e){return fetch(this._urlServer+this._qCards+e,{method:"DELETE",headers:{authorization:this._token}})}},{key:"setLike",value:function(e){return fetch(this._urlServer+this._qCards+e+this._qLikes,{method:"PUT",headers:{authorization:this._token}})}},{key:"deleteLike",value:function(e){return fetch(this._urlServer+this._qCards+e+this._qLikes,{method:"DELETE",headers:{authorization:this._token}})}}])&&x(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==F(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===F(o)?o:String(o)),n)}var o}function V(){return V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=M(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},V.apply(this,arguments)}function z(e,t){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},z(e,t)}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=M(n);if(o){var r=M(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t,r=e.popupConfig,n=e.popupSelector,o=e.nameForm;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,r,n))._delCard,t._form=document.forms[o],t}return t=u,(r=[{key:"setEventListeners",value:function(){var e=this;V(M(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._delCard(),e.close()}))}},{key:"open",value:function(e){this._delCard=e,V(M(u.prototype),"open",this).call(this)}}])&&N(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(y);function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function G(e,t){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},G(e,t)}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}var Q,W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}(i,e);var t,r,n,o=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=K(r);if(n){var o=K(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e){var t=e.popupConfig,r=e.popupSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t,r)}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(y),X=document.querySelector(".profile__btn-edit"),Y=document.querySelector(".profile__btn-add"),Z=document.querySelector(".profile__avatar-edit"),$=".popup__input",ee={classBtnClose:"popup__btn-close",classPopupOpened:"to-visible"},te={popupConfig:ee,popupSelector:".popup_type_full-img-place",figureSelector:".popup__figure",imgSelector:".popup__img",figcaptionSelector:".popup__figcaption"},re={popupConfig:ee,inputSelector:$,popupSelector:".popup_type_add-place",nameForm:"addNewPlace"},ne={popupConfig:ee,inputSelector:$,popupSelector:".popup_type_edit-profile",nameForm:"editProfileText"},oe={inputSelector:$,submitBtnSelector:".popup__btn-submit",inputUnvalidateSelector:".popup__input_type_error",errorSelector:".popup__error"},ie={cardSelector:".places__grid-item",imgSelector:".card__photo",titleSelector:".card__title",likeSelector:".card__like",btnDelSelector:".card__del-card-btn",classLikeActive:"card__like_active",templateSelector:".template",countLikeSelector:".card__like-count",btnDellHiddenClass:"to-visible"},ue={popupConfig:ee,popupSelector:".popup_type_confirmDelete",nameForm:"confirmCardDelete"};function ce(e){var t=new o({placeName:e.name,placeImgSrc:e.link,countLike:e.likes.length||0,config:ie,ownerId:e.owner._id,myId:Q,handleCardClick:function(){return fe.open(e.link,e.name)},confirmDelete:function(){return se.open((function(){le(ye.deleteCard(e._id)).then((function(){return t.deleteOnClick()})).catch((function(e){return console.log(e)}))}))},setLikeOnServer:function(){return le(ye.setLike(e._id))},deleteLikeFromServer:function(){return le(ye.deleteLike(e._id))}}),r=t.getPlaceCard();be.addItem(r)}function le(e){return e.then((function(e){if(!e.ok)throw new Error(e);return e.json()}))}var ae=new W({popupConfig:ee,popupSelector:".popup_type_editAvatar"}),se=new H(ue),fe=new E(te),pe=new D({selectorNameUserContainer:".profile__title-name",selectorUserAboutContainer:".profile__subtitle",selectorUserAvatar:".profile__avatar"}),ye=new B({token:"e07a98d9-da5b-4bb3-83f5-8be59ad95ea9",myId:"7fe16738c600cfe949208d93",urlServer:"https://mesto.nomoreparties.co/v1/cohort-65/",qUsersMe:"users/me",qCards:"cards/",qLikes:"/likes/"}),be=new q(ce,".places__grid"),me=new g(ne,(function(e){var t=e.nameUser,r=e.aboutUser;pe.setUserInfo(t,r),le(ye.updateUserData(t,r))})),de=new g(re,(function(e){var t=e.namePlace,r=e.urlImage;le(ye.addNewCard(t,r)).then((function(e){return ce(e)})).catch((function(e){return console.log(e)}))}));le(ye.getUserDataFromServer()).then((function(e){pe.setInitialUserInfo(e),Q=e._id})).then((function(){return le(ye.getInitialCards())})).then((function(e){return be.renderCards(e)})).catch((function(e){return console.log(e)})),fe.setEventListeners(),de.setEventListeners(),me.setEventListeners(),se.setEventListeners(),ae.setEventListeners(),Array.from(document.forms).forEach((function(e){new s(oe,e).enableValidation()})),Z.addEventListener("click",ae.open),Y.addEventListener("click",de.open),X.addEventListener("click",(function(){me.setInputValues(pe.getUserInfo()),me.open()})),setTimeout((function(){return document.querySelector(".preload").classList.remove("preload")}),500)})();
//# sourceMappingURL=main.js.map