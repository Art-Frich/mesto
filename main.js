(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function n(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===e(n)?n:String(n)}var o=function(){function e(t){var r=this,o=t.placeName,i=t.placeImgSrc,u=t.countLike,c=t.config,a=t.ownerId,l=t.myId,s=t.handleCardClick,f=t.confirmDelete,p=t.setLikeOnServer,y=t.deleteLikeFromServer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"_getPlaceElement",(function(){return document.querySelector(r._templateSelector).content.querySelector(r._placesItemSelector).cloneNode(!0)})),n(this,"_toggleLikeConditionOnserver",(function(){return r._imgLike.classList.contains(r._classLikeActive)?r._deleteLikeFromServer():r._setLikeOnServer()})),n(this,"_toggleLikeCondition",(function(){r._toggleLikeConditionOnserver().then((function(e){r._countLikeConitainer.textContent=e.likes.length,r._imgLike.classList.toggle(r._classLikeActive)})).catch((function(e){return console.log(e)}))})),n(this,"_setEventListeners",(function(){r._img.addEventListener("click",(function(){r._handeCardClick(r._placeImgSrc,r._placeName)})),r._imgLike.addEventListener("mousedown",r._toggleLikeCondition),r._btnPlaceDel.addEventListener("click",r._confirmDelete)})),n(this,"_fillPlaceImg",(function(){r._img.src=r._placeImgSrc,r._img.alt+=" ".concat(r._placeName),r._imgTitle.textContent=r._placeName,r._countLikeConitainer.textContent=r._countLike,r._ownerCardId===r._myId&&r._btnPlaceDel.classList.add(r._btnDellHiddenClass)})),n(this,"getPlaceCard",(function(){return r._fillPlaceImg(),r._setEventListeners(),r._placeElement})),this._placeName=o,this._placeImgSrc=i,this._countLike=u,this._ownerCardId=a,this._myId=l,this._handeCardClick=s,this._confirmDelete=f,this._setLikeOnServer=p,this._deleteLikeFromServer=y,this._templateSelector=c.templateSelector,this._placesItemSelector=c.cardSelector,this._classLikeActive=c.classLikeActive,this._btnDellHiddenClass=c.btnDellHiddenClass,this._placeElement=this._getPlaceElement(),this._img=this._placeElement.querySelector(c.imgSelector),this._imgTitle=this._placeElement.querySelector(c.titleSelector),this._imgLike=this._placeElement.querySelector(c.likeSelector),this._btnPlaceDel=this._placeElement.querySelector(c.btnDelSelector),this._countLikeConitainer=this._placeElement.querySelector(c.countLikeSelector)}var r,o;return r=e,(o=[{key:"deleteOnClick",value:function(){this._placeElement.remove(),this._placeElement=null}}])&&t(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===i(t)?t:String(t)}var s=c((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"_getFormElements",(function(e,t){return Array.from(e.querySelectorAll(t))})),a(this,"_hasInvalidInput",(function(){return r._inputList.some((function(e){return!e.validity.valid}))})),a(this,"_showInputError",(function(e,t,n){n.classList.add(r._inputUnvalidateClass),t.textContent=e})),a(this,"_hideInputError",(function(e,t){t.classList.remove(r._inputUnvalidateClass),e.textContent=""})),a(this,"_checkInputValidity",(function(e,t){e.validity.valid?r._hideInputError(t,e):r._showInputError(e.validationMessage,t,e)})),a(this,"_toggleButtonState",(function(){r._hasInvalidInput()?r._btnSubmit.setAttribute("disabled",!0):r._btnSubmit.removeAttribute("disabled")})),a(this,"_setEventListeners",(function(){r._form.addEventListener("reset",(function(e){e.preventDefault(),r._inputList.forEach((function(e,t){e.value="",r._hideInputError(r._errorList[t],e)})),r._toggleButtonState()})),r._inputList.forEach((function(e,t){e.addEventListener("input",(function(){r._checkInputValidity(e,r._errorList[t]),r._toggleButtonState()}))}))})),a(this,"enableValidation",(function(){r._setEventListeners()})),this._inputUnvalidateClass=t.inputUnvalidateSelector,this._form=n,this._inputList=this._getFormElements(n,t.inputSelector),this._errorList=this._getFormElements(n,t.errorSelector),this._btnSubmit=n.querySelector(t.submitBtnSelector)}));function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===f(o)?o:String(o)),r)}var o}var y=function(){function e(t,n){var r=t.classBtnClose,o=t.classPopupOpened;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._classPopupOpened=o,this._classBtnClose=r,this._popup=document.querySelector(n),this._handleEscClose=this._handleEscClose.bind(this),this.open=this.open.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add(this._classPopupOpened),document.addEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"close",value:function(){this._popup.classList.remove(this._classPopupOpened),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){(t.target.classList.contains(e._classPopupOpened)||t.target.classList.contains(e._classBtnClose))&&e.close()}))}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},d.apply(this,arguments)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function S(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===m(t)?t:String(t)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(r);if(o){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}(this,e)});function u(e,t){var n,r,o,c,a=e.popupConfig,l=e.inputSelector,s=e.popupSelector,f=e.nameForm,p=e.btnSubmitSelector,y=e.btnSubmitFetchCondition;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),r=v(n=i.call(this,a,s)),c=function(e){n._inputs.forEach((function(t,n){return t.value=e[t.getAttribute("name")]}))},(o=S(o="setInputValues"))in r?Object.defineProperty(r,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):r[o]=c,n._callbackSubmit=t,n._classInput=l,n._btnSubmitFetchCondition=y,n._form=document.forms[f],n._inputs=Array.from(n._form.querySelectorAll(n._classInput)),n._btnSubmit=n._form.querySelector(p),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e={};return this._inputs.forEach((function(t){e[t.getAttribute("name")]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;d(_(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._fetchCondition(e._getInputValues())}))}},{key:"_fetchCondition",value:function(e){var t=this,n=e.urlImage,r=this._btnSubmit.textContent;this._btnSubmit.textContent=this._btnSubmitFetchCondition,this._callbackSubmit(n).then((function(){return t._btnSubmit.textContent=r})).catch((function(e){return console.log(e)})).finally((function(){return t.close()}))}},{key:"close",value:function(){this._form.reset(),d(_(u.prototype),"close",this).call(this)}},{key:"open",value:function(){d(_(u.prototype),"open",this).call(this)}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(y);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==w(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},C.apply(this,arguments)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t,n=e.popupConfig,r=e.popupSelector,o=e.figureSelector,c=e.imgSelector,a=e.figcaptionSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,n,r))._figure=document.querySelector(o),t._figureImg=t._figure.querySelector(c),t._figcaption=t._figure.querySelector(a),t}return t=u,(n=[{key:"open",value:function(e,t){this._figureImg.src=e,this._figureImg.alt=t,this._figcaption.textContent=t,C(E(u.prototype),"open",this).call(this)}}])&&k(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(y);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I(r.key),r)}}function I(e){var t=function(e,t){if("object"!==L(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===L(t)?t:String(t)}var q=function(){function e(t,n){var r,o,i,u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,i=function(e){u._cards.prepend(e)},(o=I(o="addItem"))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,this._cards=document.querySelector(n),this._renderer=t}var t,n;return t=e,(n=[{key:"renderCards",value:function(e){for(var t=e.length-1;t>-1;t--)this._renderer(e[t])}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A(r.key),r)}}function A(e){var t=function(e,t){if("object"!==T(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===T(t)?t:String(t)}var D=function(){function e(t){var n,r,o,i=this,u=t.selectorNameUserContainer,c=t.selectorUserAboutContainer,a=t.selectorUserAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,o=function(){return{nameUser:i._nameContainer.textContent,aboutUser:i._aboutContainer.textContent}},(r=A(r="getUserInfo"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this._nameContainer=document.querySelector(u),this._aboutContainer=document.querySelector(c),this._userAvatar=document.querySelector(a)}var t,n;return t=e,(n=[{key:"setUserInfo",value:function(e,t){this._nameContainer.textContent=e,this._aboutContainer.textContent=t}},{key:"setAvatar",value:function(e){this._userAvatar.src=e}},{key:"setInitialUserInfo",value:function(e){this.setUserInfo(e.name,e.about),this.setAvatar(e.avatar)}}])&&U(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==R(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===R(o)?o:String(o)),r)}var o}var x=function(){function e(t){var n=t.token,r=t.myId,o=t.urlServer,i=t.qUsersMe,u=t.qCards,c=t.qLikes,a=t.qAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._token=n,this._urlServer=o,this._myId=r,this._qUsersMe=i,this._qCards=u,this._qLikes=c,this._qAvatar=a}var t,n;return t=e,(n=[{key:"getUserDataFromServer",value:function(){return fetch(this._urlServer+this._qUsersMe,{headers:{authorization:this._token}})}},{key:"getInitialCards",value:function(){return fetch(this._urlServer+this._qCards,{headers:{authorization:this._token}})}},{key:"updateUserData",value:function(e,t){return fetch(this._urlServer+this._qUsersMe,{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})})}},{key:"addNewCard",value:function(e,t){return fetch(this._urlServer+this._qCards,{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})})}},{key:"deleteCard",value:function(e){return fetch(this._urlServer+this._qCards+e,{method:"DELETE",headers:{authorization:this._token}})}},{key:"setLike",value:function(e){return fetch(this._urlServer+this._qCards+e+this._qLikes,{method:"PUT",headers:{authorization:this._token}})}},{key:"deleteLike",value:function(e){return fetch(this._urlServer+this._qCards+e+this._qLikes,{method:"DELETE",headers:{authorization:this._token}})}},{key:"updateAvatar",value:function(e){return fetch(this._urlServer+this._qUsersMe+this._qAvatar,{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})})}}])&&F(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==B(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===B(o)?o:String(o)),r)}var o}function z(){return z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=M(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},z.apply(this,arguments)}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}var H,J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=M(r);if(o){var n=M(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t,n=e.popupConfig,r=e.popupSelector,o=e.nameForm;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,n,r))._delCard,t._form=document.forms[o],t}return t=u,(n=[{key:"setEventListeners",value:function(){var e=this;z(M(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._delCard(),e.close()}))}},{key:"open",value:function(e){this._delCard=e,z(M(u.prototype),"open",this).call(this)}}])&&N(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(y),G=document.querySelector(".profile__btn-edit"),K=document.querySelector(".profile__btn-add"),Q=document.querySelector(".profile__avatar-edit"),W=".popup__input",X=".popup__btn-submit",Y="Сохранение...",Z={classBtnClose:"popup__btn-close",classPopupOpened:"to-visible"},$={popupConfig:Z,popupSelector:".popup_type_full-img-place",figureSelector:".popup__figure",imgSelector:".popup__img",figcaptionSelector:".popup__figcaption"},ee={popupConfig:Z,inputSelector:W,popupSelector:".popup_type_add-place",nameForm:"addNewPlace",btnSubmitSelector:X,btnSubmitFetchCondition:Y},te={popupConfig:Z,inputSelector:W,popupSelector:".popup_type_edit-profile",nameForm:"editProfileText",btnSubmitSelector:X,btnSubmitFetchCondition:Y},ne={inputSelector:W,submitBtnSelector:".popup__btn-submit",inputUnvalidateSelector:".popup__input_type_error",errorSelector:".popup__error"},re={cardSelector:".places__grid-item",imgSelector:".card__photo",titleSelector:".card__title",likeSelector:".card__like",btnDelSelector:".card__del-card-btn",classLikeActive:"card__like_active",templateSelector:".template",countLikeSelector:".card__like-count",btnDellHiddenClass:"to-visible"},oe={popupConfig:Z,inputSelector:W,popupSelector:".popup_type_editAvatar",nameForm:"avatarUpdate",btnSubmitSelector:X,btnSubmitFetchCondition:Y};function ie(e){var t=new o({placeName:e.name,placeImgSrc:e.link,countLike:e.likes.length||0,config:re,ownerId:e.owner._id,myId:H,handleCardClick:function(){return ae.open(e.link,e.name)},confirmDelete:function(){return ce.open((function(){ue(se.deleteCard(e._id)).then((function(){return t.deleteOnClick()})).catch((function(e){return console.log(e)}))}))},setLikeOnServer:function(){return ue(se.setLike(e._id))},deleteLikeFromServer:function(){return ue(se.deleteLike(e._id))}}),n=t.getPlaceCard();fe.addItem(n)}function ue(e){return e.then((function(e){if(!e.ok)throw new Error(e);return e.json()}))}var ce=new J({popupConfig:Z,popupSelector:".popup_type_confirmDelete",nameForm:"confirmCardDelete"}),ae=new P($),le=new D({selectorNameUserContainer:".profile__title-name",selectorUserAboutContainer:".profile__subtitle",selectorUserAvatar:".profile__avatar"}),se=new x({token:"e07a98d9-da5b-4bb3-83f5-8be59ad95ea9",myId:"7fe16738c600cfe949208d93",urlServer:"https://mesto.nomoreparties.co/v1/cohort-65/",qUsersMe:"users/me",qCards:"cards/",qLikes:"/likes/",qAvatar:"/avatar"}),fe=new q(ie,".places__grid"),pe=new g(te,(function(e){var t=e.nameUser,n=e.aboutUser;return le.setUserInfo(t,n),ue(se.updateUserData(t,n))})),ye=new g(ee,(function(e){var t=e.namePlace,n=e.urlImage;return ue(se.addNewCard(t,n)).then((function(e){return ie(e)}))})),me=new g(oe,(function(e){return ue(se.updateAvatar(e)).then((function(e){return le.setAvatar(e.avatar)}))}));ue(se.getUserDataFromServer()).then((function(e){le.setInitialUserInfo(e),H=e._id})).then((function(){return ue(se.getInitialCards())})).then((function(e){return fe.renderCards(e)})).catch((function(e){return console.log(e)})),ae.setEventListeners(),ye.setEventListeners(),pe.setEventListeners(),ce.setEventListeners(),me.setEventListeners(),Array.from(document.forms).forEach((function(e){new s(ne,e).enableValidation()})),Q.addEventListener("click",me.open),K.addEventListener("click",ye.open),G.addEventListener("click",(function(){pe.setInputValues(le.getUserInfo()),pe.open()})),setTimeout((function(){return document.querySelector(".preload").classList.remove("preload")}),500)})();
//# sourceMappingURL=main.js.map