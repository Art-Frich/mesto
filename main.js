(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(e,t,r){return(t=o(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(t){var r=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===e(r)?r:String(r)}var i=r((function e(t,r){var o=this,i=t.placeName,u=t.placeImgSrc,c=t.likes,a=t.config,l=t.ownerId,s=t.myId,f=r.handleCardClick,p=r.confirmDelete,y=r.setLikeOnServer,m=r.deleteLikeFromServer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"_getPlaceElement",(function(){return document.querySelector(o._templateSelector).content.querySelector(o._placesItemSelector).cloneNode(!0)})),n(this,"_toggleLikeConditionOnserver",(function(){return o._imgLike.classList.contains(o._classLikeActive)?o._deleteLikeFromServer():o._setLikeOnServer()})),n(this,"_toggleLikeCondition",(function(){!1===o._isLikeInProcess&&(o._isLikeInProcess=!0,o._toggleLikeConditionOnserver().then((function(e){o._countLikeContainer.textContent=e.likes.length,o._doLikeActive()})).catch((function(e){return console.log(e)})).finally((function(){return o._isLikeInProcess=!1})))})),n(this,"_setEventListeners",(function(){o._img.addEventListener("click",(function(){o._handeCardClick(o._placeImgSrc,o._placeName)})),o._imgLike.addEventListener("mousedown",o._toggleLikeCondition),o._btnPlaceDel.addEventListener("click",o._confirmDelete)})),n(this,"deleteCard",(function(){o._placeElement.remove(),o._placeElement=null})),n(this,"_fillCard",(function(){o._img.src=o._placeImgSrc,o._img.alt+=" ".concat(o._placeName),o._imgTitle.textContent=o._placeName,o._countLikeContainer.textContent=o._countLike,o._checkOwner(),o._checkMyLike()})),n(this,"_checkOwner",(function(){o._ownerCardId===o._myId&&o._btnPlaceDel.classList.add(o._btnDellHiddenClass)})),n(this,"_doLikeActive",(function(){o._imgLike.classList.toggle(o._classLikeActive)})),n(this,"_checkMyLike",(function(){o._likes.forEach((function(e){e._id===o._myId&&o._doLikeActive()}))})),n(this,"getPlaceCard",(function(){return o._fillCard(),o._setEventListeners(),o._placeElement})),this._placeName=i,this._placeImgSrc=u,this._likes=c,this._countLike=c.length,this._ownerCardId=l,this._myId=s,this._handeCardClick=f,this._confirmDelete=p,this._setLikeOnServer=y,this._deleteLikeFromServer=m,this._templateSelector=a.templateSelector,this._placesItemSelector=a.cardSelector,this._classLikeActive=a.classLikeActive,this._btnDellHiddenClass=a.btnDellHiddenClass,this._placeElement=this._getPlaceElement(),this._img=this._placeElement.querySelector(a.imgSelector),this._imgTitle=this._placeElement.querySelector(a.titleSelector),this._imgLike=this._placeElement.querySelector(a.likeSelector),this._btnPlaceDel=this._placeElement.querySelector(a.btnDelSelector),this._countLikeContainer=this._placeElement.querySelector(a.countLikeSelector),this._isLikeInProcess=!1}));function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function a(e,t,r){return(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===u(t)?t:String(t)}var s=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"_getFormElements",(function(e,t){return Array.from(e.querySelectorAll(t))})),a(this,"_hasInvalidInput",(function(){return n._inputList.some((function(e){return!n._checkValidity(e)}))})),a(this,"_showInputError",(function(e,t,r){r.classList.add(n._inputUnvalidateClass),t.textContent=e})),a(this,"_hideInputError",(function(e,t){t.classList.remove(n._inputUnvalidateClass),e.textContent=""})),a(this,"_checkInputValidity",(function(e,t){n._checkValidity(e)?n._hideInputError(t,e):n._showInputError(e.validationMessage,t,e)})),a(this,"_toggleButtonState",(function(){n._hasInvalidInput()?n._btnSubmit.setAttribute("disabled",!0):n._btnSubmit.removeAttribute("disabled")})),a(this,"_setEventListeners",(function(){n._form.addEventListener("reset",(function(e){e.preventDefault(),n._inputList.forEach((function(e,t){e.value="",n._hideInputError(n._errorList[t],e)})),n._toggleButtonState()})),n._inputList.forEach((function(e,t){e.addEventListener("input",(function(){n._checkInputValidity(e,n._errorList[t]),n._toggleButtonState()}))}))})),a(this,"enableValidation",(function(){n._setEventListeners()})),this._inputUnvalidateClass=t.inputUnvalidateClass,this._form=r,this._inputList=this._getFormElements(r,t.inputSelector),this._errorList=this._getFormElements(r,t.errorSelector),this._btnSubmit=r.querySelector(t.submitBtnSelector)}var t,r;return t=e,(r=[{key:"_checkValidity",value:function(e){return e.validity.valid}}])&&c(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===f(o)?o:String(o)),n)}var o}var y=function(){function e(t,r){var n=t.classBtnClose,o=t.classPopupOpened;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._classPopupOpened=o,this._classBtnClose=n,this._popup=document.querySelector(r),this._handleEscClose=this._handleEscClose.bind(this),this.open=this.open.bind(this)}var t,r;return t=e,(r=[{key:"open",value:function(){this._popup.classList.add(this._classPopupOpened),document.addEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"close",value:function(){this._popup.classList.remove(this._classPopupOpened),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){(t.target.classList.contains(e._classPopupOpened)||t.target.classList.contains(e._classBtnClose))&&e.close()}))}}])&&p(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},d.apply(this,arguments)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function S(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===m(t)?t:String(t)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(n);if(o){var r=_(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}(this,e)});function u(e,t){var r,n,o,c,a=e.popupConfig,l=e.inputSelector,s=e.popupSelector,f=e.nameForm,p=e.btnSubmitSelector,y=e.btnSubmitFetchCondition;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),n=v(r=i.call(this,a,s)),c=function(e){r._inputs.forEach((function(t,r){return t.value=e[t.getAttribute("name")]}))},(o=S(o="setInputValues"))in n?Object.defineProperty(n,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):n[o]=c,r._callbackSubmit=t,r._classInput=l,r._btnSubmitFetchCondition=y,r._form=document.forms[f],r._inputs=Array.from(r._form.querySelectorAll(r._classInput)),r._btnSubmit=r._form.querySelector(p),r}return t=u,(r=[{key:"_getInputValues",value:function(){return this._inputs.reduce((function(e,t){return e[t.getAttribute("name")]=t.value,e}),{})}},{key:"setEventListeners",value:function(){var e=this;d(_(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._fetchCondition()}))}},{key:"_fetchCondition",value:function(){var e=this,t=this._btnSubmit.textContent;this._btnSubmit.textContent=this._btnSubmitFetchCondition,this._callbackSubmit(this._getInputValues()).then((function(){return e._btnSubmit.textContent=t})).catch((function(e){return console.log(e)})).finally((function(){return e.close()}))}},{key:"close",value:function(){this._form.reset(),d(_(u.prototype),"close",this).call(this)}},{key:"open",value:function(){d(_(u.prototype),"open",this).call(this)}}])&&b(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(y);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==k(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===k(o)?o:String(o)),n)}var o}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},C.apply(this,arguments)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(n);if(o){var r=P(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t,r=e.popupConfig,n=e.popupSelector,o=e.figureSelector,c=e.imgSelector,a=e.figcaptionSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,r,n))._figure=document.querySelector(o),t._figureImg=t._figure.querySelector(c),t._figcaption=t._figure.querySelector(a),t}return t=u,(r=[{key:"open",value:function(e,t){this._figureImg.src=e,this._figureImg.alt=t,this._figcaption.textContent=t,C(P(u.prototype),"open",this).call(this)}}])&&w(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(y);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,I(n.key),n)}}function I(e){var t=function(e,t){if("object"!==L(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===L(t)?t:String(t)}var q=function(){function e(t,r){var n,o,i,u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,i=function(e){u._cards.prepend(e)},(o=I(o="addItem"))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,this._cards=document.querySelector(r),this._renderer=t}var t,r;return t=e,(r=[{key:"renderCards",value:function(e){for(var t=e.length-1;t>-1;t--)this._renderer(e[t])}}])&&j(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,U(n.key),n)}}function U(e){var t=function(e,t){if("object"!==A(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===A(t)?t:String(t)}var D=function(){function e(t){var r,n,o,i=this,u=t.selectorNameUserContainer,c=t.selectorUserAboutContainer,a=t.selectorUserAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=function(){return{nameUser:i._nameContainer.textContent,aboutUser:i._aboutContainer.textContent}},(n=U(n="getUserInfo"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._nameContainer=document.querySelector(u),this._aboutContainer=document.querySelector(c),this._userAvatar=document.querySelector(a)}var t,r;return t=e,(r=[{key:"setUserInfo",value:function(e,t){this._nameContainer.textContent=e,this._aboutContainer.textContent=t}},{key:"setAvatar",value:function(e){this._userAvatar.src=e}},{key:"setInitialUserInfo",value:function(e){this.setUserInfo(e.name,e.about),this.setAvatar(e.avatar)}}])&&T(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==R(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===R(o)?o:String(o)),n)}var o}var F=function(){function e(t){var r=t.token,n=t.myId,o=t.urlServer,i=t.qUsersMe,u=t.qCards,c=t.qLikes,a=t.qAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._token=r,this._urlServer=o,this._myId=n,this._qUsersMe=i,this._qCards=u,this._qLikes=c,this._qAvatar=a}var t,r;return t=e,(r=[{key:"getUserDataFromServer",value:function(){return fetch(this._urlServer+this._qUsersMe,{headers:{authorization:this._token}})}},{key:"getInitialCards",value:function(){return fetch(this._urlServer+this._qCards,{headers:{authorization:this._token}})}},{key:"updateUserData",value:function(e,t){return fetch(this._urlServer+this._qUsersMe,{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})})}},{key:"addNewCard",value:function(e,t){return fetch(this._urlServer+this._qCards,{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})})}},{key:"deleteCard",value:function(e){return fetch(this._urlServer+this._qCards+e,{method:"DELETE",headers:{authorization:this._token}})}},{key:"setLike",value:function(e){return fetch(this._urlServer+this._qCards+e+this._qLikes,{method:"PUT",headers:{authorization:this._token}})}},{key:"deleteLike",value:function(e){return fetch(this._urlServer+this._qCards+e+this._qLikes,{method:"DELETE",headers:{authorization:this._token}})}},{key:"updateAvatar",value:function(e){return fetch(this._urlServer+this._qUsersMe+this._qAvatar,{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})})}}])&&x(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==B(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===B(o)?o:String(o)),n)}var o}function V(){return V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=z(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},V.apply(this,arguments)}function M(e,t){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},M(e,t)}function z(e){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},z(e)}var H,J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=z(n);if(o){var r=z(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t,r=e.popupConfig,n=e.popupSelector,o=e.nameForm;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,r,n))._delCard,t._form=document.forms[o],t}return t=u,(r=[{key:"setEventListeners",value:function(){var e=this;V(z(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._delCard(),e.close()}))}},{key:"open",value:function(e){this._delCard=e,V(z(u.prototype),"open",this).call(this)}}])&&N(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(y),$=document.querySelector(".profile__btn-edit"),G=document.querySelector(".profile__btn-add"),K=document.querySelector(".profile__avatar-edit"),Q=".popup__input",W=".popup__btn-submit",X="Сохранение...",Y={classBtnClose:"popup__btn-close",classPopupOpened:"to-visible"},Z={popupConfig:Y,popupSelector:".popup_type_full-img-place",figureSelector:".popup__figure",imgSelector:".popup__img",figcaptionSelector:".popup__figcaption"},ee={popupConfig:Y,inputSelector:Q,popupSelector:".popup_type_add-place",nameForm:"addNewPlace",btnSubmitSelector:W,btnSubmitFetchCondition:X},te={popupConfig:Y,inputSelector:Q,popupSelector:".popup_type_edit-profile",nameForm:"editProfileText",btnSubmitSelector:W,btnSubmitFetchCondition:X},re={inputSelector:Q,submitBtnSelector:".popup__btn-submit",inputUnvalidateClass:"popup__input_type_error",errorSelector:".popup__error"},ne={cardSelector:".cards__grid-item",imgSelector:".card__photo",titleSelector:".card__title",likeSelector:".card__like",btnDelSelector:".card__del-card-btn",classLikeActive:"card__like_active",templateSelector:".template",countLikeSelector:".card__like-count",btnDellHiddenClass:"to-visible"},oe={popupConfig:Y,inputSelector:Q,popupSelector:".popup_type_editAvatar",nameForm:"avatarUpdate",btnSubmitSelector:W,btnSubmitFetchCondition:X};function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,u,c=[],a=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{if(!a&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ue(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ue(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ce(e){var t=new i(function(e){return{config:ne,placeName:e.name,placeImgSrc:e.link,likes:e.likes,ownerId:e.owner._id,myId:H}}(e),{handleCardClick:function(){return se.open(e.link,e.name)},setLikeOnServer:function(){return ae(pe.setLike(e._id))},deleteLikeFromServer:function(){return ae(pe.deleteLike(e._id))},confirmDelete:function(){return le.open((function(){ae(pe.deleteCard(e._id)).then((function(){return t.deleteCard()})).catch((function(e){return console.log(e)}))}))}}),r=t.getPlaceCard();ye.addItem(r)}function ae(e){return e.then((function(e){if(!e.ok)throw new Error(e);return e.json()}))}var le=new J({popupConfig:Y,popupSelector:".popup_type_confirmDelete",nameForm:"confirmCardDelete"}),se=new E(Z),fe=new D({selectorNameUserContainer:".profile__title-name",selectorUserAboutContainer:".profile__subtitle",selectorUserAvatar:".profile__avatar"}),pe=new F({token:"e07a98d9-da5b-4bb3-83f5-8be59ad95ea9",myId:"7fe16738c600cfe949208d93",urlServer:"https://mesto.nomoreparties.co/v1/cohort-65/",qUsersMe:"users/me",qCards:"cards/",qLikes:"/likes/",qAvatar:"/avatar"}),ye=new q(ce,".cards__grid"),me=new g(te,(function(e){var t=e.nameUser,r=e.aboutUser;return fe.setUserInfo(t,r),ae(pe.updateUserData(t,r))})),be=new g(ee,(function(e){var t=e.namePlace,r=e.urlImage;return ae(pe.addNewCard(t,r)).then((function(e){return ce(e)}))})),de=new g(oe,(function(e){var t=e.urlImage;return ae(pe.updateAvatar(t)).then((function(e){return fe.setAvatar(e.avatar)}))}));Promise.all([ae(pe.getUserDataFromServer()),ae(pe.getInitialCards())]).then((function(e){var t=ie(e,2),r=t[0],n=t[1];fe.setInitialUserInfo(r),H=r._id,ye.renderCards(n)})).catch((function(e){var t=ie(e,2),r=t[0],n=t[1];return console.log(r,n)})),se.setEventListeners(),be.setEventListeners(),me.setEventListeners(),le.setEventListeners(),de.setEventListeners(),Array.from(document.forms).forEach((function(e){new s(re,e).enableValidation()})),K.addEventListener("click",de.open),G.addEventListener("click",be.open),$.addEventListener("click",(function(){me.setInputValues(fe.getUserInfo()),me.open()})),setTimeout((function(){return document.querySelector(".preload").classList.remove("preload")}),500)})();
//# sourceMappingURL=main.js.map